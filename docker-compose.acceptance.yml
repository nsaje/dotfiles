postgres:
    expose:
      - "5432"

# this is fake telegraf that only prints stats on stdout
telegraf:
    expose:
      - "8135/udp"

memcached:
    expose:
      - "11211"

eins:
    restart: always
    hostname: eins
    image: 569683728510.dkr.ecr.us-east-1.amazonaws.com/zemanta/z1
    expose:
      - "8123"
    links:
      - "postgres:db"
      - "memcached:memcached"
      - "telegraf"
    volumes:
      - "./server/:/app/z1/"
      - ".:/src:ro"
    working_dir: /app/z1/
    entrypoint: /src/docker/entrypoint_dev.sh
    command: python restapi-test-server.py
    tty: true
    stdin_open: true

dredd:
    image: nsaje/dredd-python:2.2.5
    links:
      - "eins"
    entrypoint: bash
    volumes:
      - "./server/:/app/z1/"
    working_dir: /app/z1/
