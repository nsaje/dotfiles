general:
    artifacts:
        - ./coverage_report.txt

machine:
    python:
        version: 2.7.6
    node:
        version: v0.10.22
    environment:
        COVERAGE_ENABLED: 1 
        LIBRATO_USER: devops@zemanta.com 
        LIBRATO_TOKEN: fbf1141debf185d2e3499b1797ae375b32f8b6ec207f6d71b99818a2f9d92309


dependencies:
    override:
        - pip install -r server/requirements.txt
        - npm install:
            pwd:
                client
        - bower install:
            pwd:
                client

checkout:
    post:
        - cp ./server/server/localsettings.py.circle-ci ./server/server/localsettings.py 

test:
    override:
        - coverage run manage.py test:
            pwd:
                server
        - grunt test:
            pwd:
                client
    post:
        - coverage report > coverage_report.txt:
            pwd:
                server
