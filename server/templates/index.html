{% extends "base.html" %}

{% block head_extra %}
    <base href="/">

    <script>
        window.zOne = {
            whitelabel: null
        };

        {% if whitelabel %}
            window.zOne.whitelabel = {
                id: "{{ whitelabel }}",
                dashboardTitle: "{{ custom_dashboard_title }}"
            };
        {% endif %}
    </script>

    <link type="text/css" rel="stylesheet" href="{{ staticUrl }}/one/zemanta-one.lib.css" />

    {% if whitelabel %}
        <link type="text/css" rel="stylesheet" href="{{ staticUrl }}/one/zemanta-one-{{ whitelabel }}.css" />
    {% else %}
        <link type="text/css" rel="stylesheet" href="{{ staticUrl }}/one/zemanta-one.css" />
    {% endif %}
{% endblock %}

{% block content %}
    <div>
        <div class="splash" ng-cloak="">
            <div class="loader"></div>
        </div>
        <ui-view/>
    </div>
{% endblock %}

{% block footer %}
    {% if not debug %}
        <!-- AdBlock test -->
        <script>
            var adblockTest = document.createElement('div');
            adblockTest.innerHTML = '&nbsp;';
            adblockTest.className = 'adsbox';
            document.body.appendChild(adblockTest);
            window.setTimeout(function() {
                if (adblockTest.offsetHeight === 0) {
                    alert("Zemanta One might not work as expected when an ad blocker is enabled in a web browser. Turn it off or add this web page's URL as an exception so you can continue working without any problems. After you turn off the ad blocker, you'll need to refresh your screen.");
                }
                adblockTest.remove();
            }, 100);
        </script>

        <!-- Google Analytics -->
        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');</script>
    {% endif %}

    <script type="text/javascript" src="{{ staticUrl }}/one/zemanta-one.polyfills.js"></script>
    <script type="text/javascript" src="{{ staticUrl }}/one/zemanta-one.lib.js"></script>
    <script type="text/javascript" src="{{ staticUrl }}/one/zemanta-one.js"></script>
{% endblock %}
