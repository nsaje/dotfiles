<div is-internal="zemauth.can_see_new_chart" class="chart-container loader-container">
    <div class="loader" ng-show="!$ctrl.initialized || $ctrl.chart.isLoading"></div>
    <div class="chart-selector">
        <zem-chart-metric-selector class="zem-chart-metrics-selector"
                chart="$ctrl.chart"
                metric="$ctrl.metrics.metric1"
                on-metric-changed="$ctrl.onMetricsChanged(value, $ctrl.metrics.metric2)"
        ></zem-chart-metric-selector>
        <zem-chart-metric-selector class="zem-chart-metrics-selector"
               chart="$ctrl.chart"
               metric="$ctrl.metrics.metric2"
               on-metric-changed="$ctrl.onMetricsChanged($ctrl.metrics.metric1, value)"
               nullable="true"
        ></zem-chart-metric-selector>
    </div>
    <ul class="chart-legend">
        <li ng-repeat="item in $ctrl.chart.legend.items">
            <div class="legend-item" style="background-color: {{ item.color1 }};">
                <div class="button-remove" ng-class="{disabled: (item.id === null && $ctrl.chart.legend.items.length === 1) || !item.removable }" ng-click="$ctrl.removeLegendItem(item)">
                    <img ng-src="{{ $ctrl.config.static_url }}/one/images/remove-white.svg">
                </div>
                <div class="text" style="background-color: {{ item.color2 }}; color: {{ item.color1 }}">{{ item.name }}</div>
            </div>
        </li>
    </ul>
    <div class="no-data" ng-if="$ctrl.initialized && !$ctrl.chart.hasData"><span>No data</span></div>
    <div ng-if="$ctrl.initialized" highchart config="$ctrl.chart.config" class="chart"></div>
</div>
