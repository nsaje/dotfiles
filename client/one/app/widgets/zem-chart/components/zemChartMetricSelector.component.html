<span class="dropdown" uib-dropdown>
  <a href class="button button--dropdown-toggle-icon" uib-dropdown-toggle>{{$ctrl.metric ? $ctrl.metric.name : 'None'}}</a>
  <ul class="dropdown-menu" uib-dropdown-menu>
      <div class="list-wrapper custom-scroller">
          <div ng-repeat="category in $ctrl.chart.metrics.options" class="row">
              <div class="category-name col-xs-12"><span>{{ category.name }}</span></div>
              <div class="description col-xs-12" ng-if="category.description">
                  <span>{{ category.description }}</span></div>
              <li ng-repeat="metric in category.metrics" class="col-xs-6">
                  <div class="option" ng-click="$ctrl.onChanged(metric)" is-internal="{{metric.internal}}"
                       ng-class="{'option--selected': metric === $ctrl.metric}">
                      {{ metric.name }}
                  </div>
              </li>
              <div ng-repeat="subcategory in category.subcategories" class="subcategory">
                  <div class="col-xs-6 condensed">
                      <div class="sub-category-name row"><span>{{ subcategory.name }}</span></div>
                      <div class="row">
                          <li ng-repeat="metric in subcategory.metrics">
                              <div class="option" ng-click="$ctrl.onChanged(metric)"
                                   ng-class="{'option--selected': metric === $ctrl.metric}">
                                  {{ metric.shortName }}
                              </div>
                          </li>
                      </div>
                  </div>
              </div>
          </div>
          <div ng-if="$ctrl.nullable" class="row">
              <span class="option" ng-click="$ctrl.onChanged(null)"
                   ng-class="{'option--selected': !$ctrl.metric}">
                  None
              </span>
          </div>
      </div>
  </ul>
</span>
