<div class="zem-settings-component__container zem-settings-component__container--ad-group-general-settings">
    <div class="zem-settings-component__header">General settings</div>
    <div class="form">
        <div class="form__group" ng-class="{'form--error': !!$ctrl.errors.state}">
            <label class="form__label" for="name-input">Name:</label>
            <input class="form__input-text" id="name-input" type="text" ng-model="$ctrl.entity.settings.name">
            <div class="message message--error" ng-repeat="error in $ctrl.errors.name"
                 for="name-input">{{ error }}</div>
        </div>

        <div class="form__group" ng-class="{'form--error': !!$ctrl.errors.startDate}">
            <label class="form__label" for="start-date-input">
                Start date:
                <zem-help-popover content="The date when content promotion commenced." placement="top"></zem-help-popover>
            </label>
            <div class="form__prefixed-field form__prefixed-field--narrow form__prefixed-field--with-icon form__prefixed-field--calendar-icon">
                <input class="form__input-text" id="start-date-input" type="text" uib-datepicker-popup="MM/dd/yyyy"
                       ng-model="$ctrl.entity.settings.startDate" is-open="$ctrl.startDatePicker.isOpen"
                       ng-click="$ctrl.openDatePicker('startDate')">
            </div>
            <div class="message message--error" ng-repeat="error in $ctrl.errors.startDate"
                 for="start-date-input">{{ error }}</div>
        </div>

        <div class="form__group" ng-class="{'form--error': !!$ctrl.errors.endDate}">
            <label class="form__label" for="start-date-input">
                End date:
                <zem-help-popover content="The date when content promotion paused." placement="top"></zem-help-popover>
            </label>
            <div class="form__prefixed-field form__prefixed-field--narrow form__prefixed-field--with-icon form__prefixed-field--calendar-icon">
                <input class="form__input-text" ng-disabled="$ctrl.entity.warnings.endDate !== undefined" id="end-date-input"
                       type="text" uib-datepicker-popup="MM/dd/yyyy" datepicker-options="$ctrl.endDatePickerOptions"
                       ng-model="$ctrl.entity.settings.endDate" is-open="$ctrl.endDatePicker.isOpen"
                       ng-click="$ctrl.openDatePicker('endDate')">
            </div>
            <input class="form__input-checkbox" ng-disabled="$ctrl.entity.warnings.endDate !== undefined" type="checkbox"
                   id="manual-stop-cb" ng-model="$ctrl.entity.settings.manualStop">
            <label class="form__checkbox-text" for="manual-stop-cb">I'll stop it myself</label>
            <div class="message message--error" ng-if="$ctrl.entity.warnings.endDate === undefined"
                 ng-repeat="error in $ctrl.errors.endDate" for="end-date-input">{{ error }}</div>
            <div class="message message--warning message--with-icon" ng-if="$ctrl.entity.warnings.endDate !== undefined">
                {{ $ctrl.MESSAGES.WARNING_END_DATE }} <a zem-in-link="main.campaigns.budget({id: {{ $ctrl.entity.warnings.endDate.campaignId }} })">Add budget</a>
            </div>
        </div>

        <div class="form__group" ng-if="$ctrl.hasPermission('zemauth.can_set_ad_group_max_cpc')"
             ng-class="{'form--error': !!$ctrl.errors.cpc}">
            <label class="form__label" for="cpc-input" is-internal="zemauth.can_set_ad_group_max_cpc">
                Maximum CPC:
                <zem-help-popover content="Maximum allowed CPC in this ad group." placement="top"></zem-help-popover>
            </label>
            <div class="form__prefixed-field form__prefixed-field--narrow">
                <span class="form__field-prefix">$</span>
                <input class="form__input-text" id="cpc-input" type="text" ng-model="$ctrl.entity.settings.cpc"
                       zem-currency-input fraction-size="3" empty-text="No limit">
            </div>
            <div class="message message--error" ng-repeat="error in $ctrl.errors.cpc"
                 for="cpc-input">{{ error }}</div>
        </div>

        <div class="form__group" ng-if="$ctrl.hasPermission('zemauth.can_set_ad_group_max_cpm')"
             ng-class="{'form--error': !!$ctrl.errors.maxCpm}">
            <label class="form__label" for="cpc-input" is-internal="zemauth.can_set_ad_group_max_cpm">
                Maximum CPM:
                <zem-help-popover content="Maximum allowed CPM in this ad group." placement="top"></zem-help-popover>
            </label>
            <div class="form__prefixed-field form__prefixed-field--narrow">
                <span class="form__field-prefix">$</span>
                <input class="form__input-text" id="cpm-input" type="text" ng-model="$ctrl.entity.settings.maxCpm"
                       zem-currency-input fraction-size="3" empty-text="No limit">
                <input id="cpm-input" ng-disabled="$ctrl.entity.warnings.maxCpm !== undefined" type="text" class="form__input-text" ng-model="$ctrl.entity.settings.maxCpm" zem-currency-input fraction-size="3" empty-text="No limit">
            </div>
            <div class="message message--error" ng-repeat="error in $ctrl.errors.maxCpm"
                 for="cpm-input">{{ error }}</div>
        </div>
        <div ng-if="$ctrl.entity.warnings.maxCpm !== undefined" class="message message--warning message--with-icon">
            {{ $ctrl.MESSAGES.WARNING_MAX_CPM }}
        </div>
        <label ng-if="$ctrl.entity.warnings.maxCpm === undefined" ng-repeat="error in $ctrl.errors.maxCpm" class="control-label error" for="cpm-input">{{ error }}</label>
    </div>
</div>
