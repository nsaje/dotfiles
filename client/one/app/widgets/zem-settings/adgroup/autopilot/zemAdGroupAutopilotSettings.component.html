<div class="form-horizontal white-background" ng-if="$ctrl.hasPermission('zemauth.can_set_adgroup_to_auto_pilot')">
    <zem-internal-feature ng-if="$ctrl.isPermissionInternal('zemauth.can_set_adgroup_to_auto_pilot')" popover-placement="right"></zem-internal-feature>
    <h2>Autopilot</h2>
    <div class="description">Bids and Daily Spend Caps Automation Settings.</div>
    <div class="col-xs-12 alert alert-warning form-alert-box" ng-if="$ctrl.isInLanding()" >
        <div class="form-alert-exclamation">
            <img class="warning-icon" ng-src="{{ $ctrl.config.static_url }}/one/img/notification-warning.svg"></img>
        </div>
        <div class="form-alert-body">Autopilot is automatically enabled because the campaign is in landing mode. </div>
    </div>
    <div class="form-group" ng-class="{'has-error': !!$ctrl.errors.autopilotState}">
        <div class="radio" ng-repeat='autopilotState in $ctrl.options.adGroupSettingsAutopilotStates'>
            <label>
                <input type="radio" ng-model="$ctrl.entity.settings.autopilotState" ng-value="autopilotState.value" ng-disabled="$ctrl.isInLanding()"> {{ autopilotState.name }} <zem-help-popover content="{{autopilotState.help}}" placement="right"></zem-help-popover>
            </label>
        </div>

        <label ng-repeat="error in $ctrl.errors.autopilotState" class="control-label error">{{ error }}</label>
    </div>

    <div class="form-group daily-spend-caps clearfix" ng-if="$ctrl.showAutoPilotDailyBudgetInput()" ng-class="{'has-error': !!$ctrl.errors.autopilotBudget}">
        <label for="autopilot-budget" class="col-xs-2 control-label">
            Ad Group's Daily Spend Cap
            <zem-help-popover content="Amount of budget Autopilot can operate with on this Ad Group every day." placement="top"></zem-help-popover>
        </label>
        <div class="col-xs-2">
            <div class="input-group">
                <span class="input-group-addon">$</span>
                <input id="autopilot-budget" type="text" class="form-control" ng-model="$ctrl.entity.settings.autopilotBudget" fraction-size="0" zem-currency-input ng-disabled="$ctrl.isInLanding()">
            </div>
        </div>
        <div class="col-xs-4">
            <label ng-repeat="error in $ctrl.errors.autopilotBudget" class="control-label error" for="autopilot-budget">{{ error }}</label>
        </div>
    </div>

    <div class="form-group daily-spend-caps" ng-if="$ctrl.showAutoPilotDailyBudgetInput()">
        <div class="col-xs-12">
            Autopilot will optimize media sources' daily spend caps for <b>{{$ctrl.getBudgetAutopilotOptimizationGoalText()}}</b> and try to hit the ad group's daily spend cap.<br>To change optimization objective please change Primary Campaign Goal in Campaign Settings.<br/>
            <i>{{$ctrl.getBudgetAutopilotOptimizationCPAGoalText()}}</i>
        </div>
    </div>
</div>
