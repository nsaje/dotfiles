<ng-container *ngIf="store.state$ | async as state">
    <div class="zem-bid-modifier-import-form__item">
        <ng-container
            *ngTemplateOutlet="bidModifierUploadMessage"
        ></ng-container>
    </div>
    <label class="zem-bid-modifier-import-form__item">
        CSV file with bid modifiers:
    </label>
    <zem-file-selector
        class="zem-file-selector zem-bid-modifier-import-form__item"
        [dropZoneLabel]="'Drop your file here or'"
        [accept]="'text/csv'"
        [isMultiple]="false"
        [showBrowseButton]="true"
        [browseButtonLabel]="'Choose file'"
        (filesChange)="onFilesChange($event)"
    ></zem-file-selector>
    <div
        class="zem-message zem-message--bubble zem-message--error zem-message--with-icon zem-bid-modifier-import-form__item"
        *ngIf="state.fieldsErrors.errorFileUrl || state.fieldsErrors.file"
    >
        <ng-container *ngIf="state.fieldsErrors.errorFileUrl">
            <p>There were some errors in the attached file.</p>
            <a (click)="downloadErrors()">Download the report</a>
        </ng-container>
        <ng-container *ngIf="!state.fieldsErrors.errorFileUrl">
            {{ state.fieldsErrors.file }}
        </ng-container>
    </div>
    <div
        class="zem-message zem-message--bubble zem-message--help zem-message--with-icon zem-bid-modifier-import-form__item"
    >
        <p>You can download our example file here.</p>
        <a (click)="downloadExample()">Download CSV example file</a>
    </div>
</ng-container>

<ng-template #bidModifierUploadMessage>
    <p>
        Upload the file with bid modifiers. You can download a sample file
        below. Please note:
    </p>
    <ul>
        <li
            *ngFor="let paragraph of importInstructionsText"
            [innerHTML]="paragraph"
        ></li>
        <li>
            Bid modifiers less than one reduce the bid and bid modifiers greater
            than one increase the bid proportionally.
        </li>
    </ul>
    <strong>Warning</strong>
    <ul>
        <li>
            The upload will remove all preexisting bid modifiers on this
            dimension.
        </li>
    </ul>
</ng-template>
