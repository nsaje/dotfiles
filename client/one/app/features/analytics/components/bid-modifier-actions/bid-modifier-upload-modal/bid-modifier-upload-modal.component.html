<ng-container *ngIf="(store.state$ | async) as state">
    <div class="zem-modal__header">
        <div class="zem-modal__title">Import Bid Modifiers</div>
    </div>
    <div class="zem-modal__body">
        <div class="zem-bid-modifier-upload-modal__item">
            <ng-container
                *ngTemplateOutlet="bidModifierUploadMessage"
            ></ng-container>
        </div>
        <label class="zem-bid-modifier-upload-modal__item">
            CSV file with bid modifiers:
        </label>
        <zem-file-selector
            class="zem-file-selector zem-bid-modifier-upload-modal__item"
            [dropZoneLabel]="'Drop your file here or'"
            [accept]="'text/csv'"
            [isMultiple]="false"
            [showBrowseButton]="true"
            [browseButtonLabel]="'Choose file'"
            (filesChange)="onFilesChange($event)"
        ></zem-file-selector>
        <div
            class="zem-message zem-message--bubble zem-message--error zem-message--with-icon zem-bid-modifier-upload-modal__item"
            *ngIf="state.fieldsErrors.errorFileUrl || state.fieldsErrors.file"
        >
            <ng-container *ngIf="state.fieldsErrors.errorFileUrl">
                <p>There were some errors in the attached file.</p>
                <a (click)="downloadErrors()">Download the report</a>
            </ng-container>
            <ng-container *ngIf="!state.fieldsErrors.errorFileUrl">
                {{ state.fieldsErrors.file }}
            </ng-container>
        </div>
        <div
            class="zem-message zem-message--bubble zem-message--help zem-message--with-icon zem-bid-modifier-upload-modal__item"
        >
            <p>You can download our example file here.</p>
            <a (click)="downloadExample()">Download CSV example file</a>
        </div>
    </div>
    <div class="zem-modal__footer buttons-panel">
        <button
            *ngIf="state.requests.import.inProgress"
            class="button button--highlight button--disabled"
            disabled
        >
            <span class="loader loader--white"></span>
        </button>
        <button
            *ngIf="!state.requests.import.inProgress"
            class="button button--highlight button--with-icon check-icon"
            [disabled]="!state.file"
            (click)="import()"
        >
            Import
        </button>
        <button
            class="button button--outline"
            [disabled]="state.requests.import.inProgress"
            (click)="cancel.emit()"
        >
            Cancel
        </button>
    </div>
</ng-container>

<ng-template #bidModifierUploadMessage>
    <p>
        Upload the file with bid modifiers. You can download a sample file
        below. Please note:
    </p>
    <ng-container [ngSwitch]="breakdown">
        <ng-container *ngSwitchCase="Breakdown.CONTENT_AD">
            <ul>
                <li>
                    First column in the CSV file contains the content ad id and
                    the second column the bid modifier. The first row in the CSV
                    file is ignored.
                </li>
                <li>
                    Bid modifier values should range from 0 up. The resulting ad
                    bid is obtained by multiplying existing ad group bid with
                    the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and publisher
                    modifiers greater than one increase the bid proportionally.
                    To reset the bid use 1.
                </li>
                <li>
                    The import only updates the ad's bid modifiers that are
                    included in the uploaded file. Other preexisting bid
                    modifiers remain the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.COUNTRY">
            <ul>
                <li>
                    First column in the CSV file contains the country code and
                    the second column the bid modifier. The first row in the CSV
                    file is ignored.
                </li>
                <li>
                    For a list of valid country codes please refer to
                    <a
                        href="https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes"
                        target="_blank"
                        >this page</a
                    >
                    (Alpha 2-code).
                </li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    country bid is obtained by multiplying existing ad group bid
                    with the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and publisher
                    modifiers greater than one increase the bid proportionally.
                    To reset the bid use 1.
                </li>
                <li>
                    The import only updates the country's bid modifiers that are
                    included in the uploaded file. Other preexisting bid
                    modifiers remain the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.STATE">
            <ul>
                <li>
                    First column in the CSV file contains the state code and the
                    second column the bid modifier. The first row in the CSV
                    file is ignored.
                </li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    state bid is obtained by multiplying existing ad group bid
                    with the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and publisher
                    modifiers greater than one increase the bid proportionally.
                    To reset the bid use 1.
                </li>
                <li>
                    The import only updates the state's bid modifiers that are
                    included in the uploaded file. Other preexisting bid
                    modifiers remain the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.DMA">
            <ul>
                <li>
                    First column in the CSV file contains the DMA code and the
                    second column the bid modifier. The first row in the CSV
                    file is ignored.
                </li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    DMA bid is obtained by multiplying existing ad group bid
                    with the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and publisher
                    modifiers greater than one increase the bid proportionally.
                    To reset the bid use 1.
                </li>
                <li>
                    The import only updates the ad's bid modifiers that are
                    included in the uploaded file. Other preexisting bid
                    modifiers remain the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.DEVICE">
            <ul>
                <li>
                    First column in the CSV file contains the device specifier
                    and the second column the bid modifier. The first row in the
                    CSV file is ignored.
                </li>
                <li>Valid device specifiers are: MOBILE, DESKTOP, TABLET.</li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    device bid is obtained by multiplying existing ad group bid
                    with the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and bid modifiers
                    greater than one increase the bid proportionally. To reset
                    the bid use 1.
                </li>
                <li>
                    The import only updates the bid modifiers that are included
                    in the uploaded file. Other preexisting bid modifiers remain
                    the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.PLACEMENT">
            <ul>
                <li>
                    First column in the CSV file contains the placement
                    specifier and the second column the bid modifier. The first
                    row in the CSV file is ignored.
                </li>
                <li>Valid placement specifiers are: APP, SITE.</li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    placement bid is obtained by multiplying existing ad group
                    bid with the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and bid modifiers
                    greater than one increase the bid proportionally. To reset
                    the bid use 1.
                </li>
                <li>
                    The import only updates the bid modifiers that are included
                    in the uploaded file. Other preexisting bid modifiers remain
                    the same.
                </li>
            </ul>
        </ng-container>
        <ng-container *ngSwitchCase="Breakdown.OPERATING_SYSTEM">
            <ul>
                <li>
                    First column in the CSV file contains the operating system
                    specifier and the second column the bid modifier. The first
                    row in the CSV file is ignored.
                </li>
                <li>
                    Please consult this page for valid operating system
                    specifiers.
                </li>
                <li>
                    Bid modifier values should range from 0 up. The resulting
                    bid is obtained by multiplying existing ad group bid with
                    the number from the imported CSV file.
                </li>
                <li>
                    Bid modifiers less than one reduce the bid and bid modifiers
                    greater than one increase the bid proportionally. To reset
                    the bid use 1.
                </li>
                <li>
                    The import only updates the bid modifiers that are included
                    in the uploaded file. Other preexisting bid modifiers remain
                    the same.
                </li>
            </ul>
        </ng-container>
    </ng-container>
</ng-template>
