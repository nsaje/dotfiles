<div class="zem-form-group">
    <label class="zem-form-group__label">
        Bidding type
        <zem-help-popover
            class="zem-help-popover"
            content="Select the bidding type that best fits the objective of your campaign. CPC bidding focuses the algorithm on delivering clicks at the desired click price. The CPM bidding will deliver impressions at the given price or lower."
            placement="bottom"
        ></zem-help-popover>
    </label>

    <div class="zem-form-group__content">
        <zem-radio-input
            class="zem-radio-input zem-form-group__content-item"
            [groupModel]="biddingType"
            [value]="BiddingType.CPC"
            [isDisabled]="isDisabled"
            [hasError]="hasBidErrors() && biddingType === BiddingType.CPC"
            (select)="onBiddingTypeSelect($event)"
        >
            CPC
            <span class="zem-radio-input__deemphasized-label-text"
                >- Focus on the clicks that your ad receives.</span
            >
        </zem-radio-input>
        <div
            class="zem-form-group__subgroup"
            *ngIf="biddingType === BiddingType.CPC"
        >
            <div *ngIf="!isAutopilotActive()">
                <div class="zem-bidding-type-setting__max-bid-form-group">
                    <label class="zem-bidding-type-setting__max-bid-label"
                        >Bid CPC:</label
                    >
                    <zem-currency-input
                        class="zem-currency-input zem-form-group__input zem-bidding-type-setting__max-bid-input"
                        [value]="bid"
                        [hasError]="bidErrors && bidErrors.length > 0"
                        [currencySymbol]="currencySymbol"
                        [isDisabled]="isDisabled"
                        fractionSize="3"
                        (inputBlur)="bidChange.emit($event)"
                    ></zem-currency-input>
                    <div
                        class="message message--info message--with-icon zem-settings-section__item"
                    >
                        The bidder will optimise towards the target CPC
                        configured here. You can fine tune the target CPC on
                        each traffic dimension using bid modifiers.
                    </div>
                </div>
                <div
                    class="zem-message zem-message--error zem-form-group__subgroup-item"
                    *ngFor="let error of bidErrors"
                >
                    {{ error }}
                </div>
            </div>
            <div *ngIf="isAutopilotActive()">
                <div class="zem-bidding-type-setting__max-bid-form-group">
                    <label class="zem-bidding-type-setting__max-bid-label"
                        >Max Bid CPC:</label
                    >
                    <zem-currency-input
                        class="zem-currency-input zem-form-group__input zem-bidding-type-setting__max-bid-input"
                        [value]="maxBid"
                        placeholder="No limit"
                        [hasError]="maxBidErrors && maxBidErrors.length > 0"
                        [currencySymbol]="currencySymbol"
                        [isDisabled]="isDisabled"
                        fractionSize="3"
                        (inputBlur)="maxBidChange.emit($event)"
                    ></zem-currency-input>
                    <div
                        class="message message--info message--with-icon zem-settings-section__item"
                    >
                        The change of Maximum Bid CPC will update bids on all
                        media sources within the ad group.
                    </div>
                </div>
                <div
                    class="zem-message zem-message--error zem-form-group__subgroup-item"
                    *ngFor="let error of maxBidErrors"
                >
                    {{ error }}
                </div>
            </div>
        </div>
        <zem-radio-input
            class="zem-radio-input zem-form-group__content-item zem-form-group__content-item--no-spacing"
            [groupModel]="biddingType"
            [value]="BiddingType.CPM"
            [isDisabled]="isDisabled"
            [hasError]="hasBidErrors() && biddingType === BiddingType.CPM"
            (select)="onBiddingTypeSelect($event)"
        >
            CPM
            <span class="zem-radio-input__deemphasized-label-text"
                >- Focus on the impressions of your ad.</span
            >
        </zem-radio-input>
        <div
            class="zem-form-group__subgroup"
            *ngIf="biddingType === BiddingType.CPM"
        >
            <div *ngIf="!isAutopilotActive()">
                <div class="zem-bidding-type-setting__max-bid-form-group">
                    <label class="zem-bidding-type-setting__max-bid-label"
                        >Bid CPM:</label
                    >
                    <zem-currency-input
                        class="zem-currency-input zem-form-group__input zem-bidding-type-setting__max-bid-input"
                        [value]="bid"
                        [hasError]="bidErrors && bidErrors.length > 0"
                        [currencySymbol]="currencySymbol"
                        [isDisabled]="isDisabled"
                        fractionSize="3"
                        (inputBlur)="bidChange.emit($event)"
                    ></zem-currency-input>
                    <div
                        class="message message--info message--with-icon zem-settings-section__item"
                    >
                        The bidder will optimise towards the target CPM
                        configured here. You can fine tune the target CPM on
                        each traffic dimension using bid modifiers.
                    </div>
                </div>
                <div
                    class="zem-message zem-message--error zem-form-group__subgroup-item"
                    *ngFor="let error of bidErrors"
                >
                    {{ error }}
                </div>
            </div>
            <div *ngIf="isAutopilotActive()">
                <div class="zem-bidding-type-setting__max-bid-form-group">
                    <label class="zem-bidding-type-setting__max-bid-label"
                        >Max Bid CPM:</label
                    >
                    <zem-currency-input
                        class="zem-currency-input zem-form-group__input zem-bidding-type-setting__max-bid-input"
                        [value]="maxBid"
                        placeholder="No limit"
                        [hasError]="maxBidErrors && maxBidErrors.length > 0"
                        [currencySymbol]="currencySymbol"
                        [isDisabled]="isDisabled"
                        fractionSize="3"
                        (inputBlur)="maxBidChange.emit($event)"
                    ></zem-currency-input>
                    <div
                        class="message message--info message--with-icon zem-settings-section__item"
                    >
                        The change of Maximum Bid CPM will update bids on all
                        media sources within the ad group.
                    </div>
                </div>
                <div
                    class="zem-message zem-message--error zem-form-group__subgroup-item"
                    *ngFor="let error of maxBidErrors"
                >
                    {{ error }}
                </div>
            </div>
        </div>
        <div
            class="zem-form-group__subgroup-item zem-message zem-message--error"
            *ngFor="let error of biddingTypeErrors"
        >
            {{ error }}
        </div>
    </div>
</div>
