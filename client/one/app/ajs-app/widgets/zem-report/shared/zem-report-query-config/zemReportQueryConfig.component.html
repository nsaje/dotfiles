<div class="form__group form__group--informative">
    <label class="form__label">View</label>
    <div class="form__information">{{ $ctrl.view }}</div>
</div>
<hr />
<div class="form__group form__group--informative">
    <label class="form__label">Breakdowns</label>
    <div class="form__information">
        <span
            ng-repeat="dimension in $ctrl.shownBreakdown"
            ng-click="$ctrl.removeBreakdown(dimension)"
            class="tag tag--remove-button"
            >{{ dimension.name }}</span
        >

        <ui-select
            theme="select2"
            search-enabled="false"
            ng-model="$ctrl.addbreakdown"
            ng-disabled="$ctrl.disabled"
            class="button button--small button--with-icon button--dropdown-toggle-icon add-icon zem-report-query-config__add-breakdown"
            ng-if="$ctrl.availableBreakdowns.length"
        >
            <ui-select-match class="ui-select-match" placeholder="Add breakdown"
                >Add breakdown</ui-select-match
            >
            <ui-select-choices
                repeat="breakdown in $ctrl.availableBreakdowns"
                group-by="'breakdownType'"
                class="ui-select-choices"
            >
                <div
                    ng-if="breakdown.shown"
                    ng-click="$ctrl.addBreakdown(breakdown)"
                    is-internal="breakdown.internal"
                >
                    {{ breakdown.name }}
                </div>
            </ui-select-choices>
        </ui-select>
    </div>
</div>
<hr />
<div class="form__group form__group--informative">
    <label class="form__label">Columns</label>
    <div class="form__information">
        <div>
            <span ng-repeat="field in $ctrl.shownSelectedFields" class="tag">{{
                field
            }}</span>
            <a
                class="tag tag--show-more"
                ng-click="$ctrl.showAllSelectedFields()"
                ng-if="$ctrl.shownSelectedFields.length < $ctrl.config.selectedFields.length"
                >...</a
            >
        </div>
        <zem-report-column-selector
            disabled="$ctrl.disabled"
            on-column-toggled="$ctrl.onColumnToggled(field)"
            on-columns-toggled="$ctrl.onColumnsToggled(fields)"
            on-all-columns-toggled="$ctrl.onAllColumnsToggled(isChecked)"
            categories="$ctrl.categories"
        >
        </zem-report-column-selector>
    </div>
</div>
<hr ng-if="$ctrl.appliedFilterConditions.length" />
<div
    class="form__group form__group--informative"
    ng-if="$ctrl.appliedFilterConditions.length"
>
    <label class="form__label">Filters</label>
    <div class="form__information">
        <span
            ng-repeat="condition in $ctrl.shownAppliedFilterConditions"
            class="tag"
            >{{ condition.text }}</span
        >
        <a
            class="tag tag--show-more"
            ng-click="$ctrl.showAllAppliedFilters()"
            ng-if="$ctrl.shownAppliedFilterConditions.length < $ctrl.appliedFilterConditions.length"
            >...</a
        >
    </div>
</div>
<hr />
<div class="form__group form__group--informative">
    <label class="form__label" for="include-totals-checkbox"
        >Include totals</label
    >
    <div class="form__checkbox">
        <label>
            <input
                id="include-totals-checkbox"
                type="checkbox"
                ng-model="$ctrl.config.includeTotals"
                ng-disabled="$ctrl.disabled || $ctrl.config.allAccountsInLocalCurrency"
                class="input-checkbox"
            />
            <span class="checkbox-text"></span>
        </label>
    </div>
</div>
<div class="form__group" ng-if="$ctrl.showIncludeItemsWithNoSpend">
    <label class="form__label" for="add-missing-checkbox"
        >Include items with no spend</label
    >
    <div class="form__checkbox">
        <label>
            <input
                id="add-missing-checkbox"
                type="checkbox"
                ng-model="$ctrl.config.includeItemsWithNoSpend"
                ng-disabled="$ctrl.disabled"
                class="input-checkbox"
            />
            <span class="checkbox-text" for="add-missing-checkbox"></span>
        </label>
    </div>
</div>
<div ng-if="$ctrl.showAllAccountsInLocalCurrencyCheckbox" class="form__group">
    <label class="form__label" for="all-accounts-in-local-currency-checkbox">
        Use accounts' local currencies to generate report
    </label>
    <div class="form__checkbox">
        <label>
            <input
                id="all-accounts-in-local-currency-checkbox"
                type="checkbox"
                ng-model="$ctrl.config.allAccountsInLocalCurrency"
                ng-disabled="$ctrl.disabled"
                class="input-checkbox"
            />
            <span
                class="checkbox-text"
                for="all-accounts-in-local-currency-checkbox"
            ></span>
        </label>
    </div>
</div>
<div ng-if="$ctrl.showAllAccountsCreditRefunds" class="form__group">
    <label
        class="form__label"
        for="all-accounts-include-credit-refunds"
        is-internal="zemauth.can_include_credit_refunds_in_report"
    >
        Include credit refunds
    </label>
    <div class="form__checkbox">
        <label>
            <input
                id="all-accounts-include-credit-refunds"
                type="checkbox"
                ng-model="$ctrl.config.allAccountsIncludeCreditRefunds"
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-checkbox"
            />
            <span
                class="checkbox-text"
                for="all-accounts-include-credit-refunds"
            ></span>
        </label>
    </div>
</div>
<div ng-if="$ctrl.showIncludeEntityTags" class="form__group">
    <label class="form__label" for="include-tags-checkbox" is-internal="true">
        Include tags
    </label>
    <div class="form__checkbox">
        <label>
            <input
                id="include-tags-checkbox"
                type="checkbox"
                ng-model="$ctrl.config.includeEntityTags"
                ng-disabled="$ctrl.disabled"
                class="input-checkbox"
            />
            <span class="checkbox-text" for="include-tags-checkbox"></span>
        </label>
    </div>
</div>
<hr />
<div class="form__group">
    <label class="form__label"> CSV separator </label>
    <div class="form__radio">
        <label>
            <input
                id="csv-delimiter-radio-comma"
                type="radio"
                ng-model="$ctrl.config.csvSeparator"
                value=","
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text"> Comma </span>
        </label>
    </div>
    <div class="form__radio">
        <label>
            <input
                id="csv-delimiter-radio-semicolon"
                type="radio"
                ng-model="$ctrl.config.csvSeparator"
                value=";"
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text"> Semicolon </span>
        </label>
    </div>
    <div class="form__radio">
        <label>
            <input
                id="csv-delimiter-radio-tab"
                type="radio"
                ng-model="$ctrl.config.csvSeparator"
                value="{{ '\t' }}"
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text"> Tab </span>
        </label>
    </div>
    <div class="form__radio">
        <label>
            <input
                id="csv-delimiter-radio-other"
                type="radio"
                ng-model="$ctrl.config.csvSeparator"
                ng-value="$ctrl.csvSeparatorOther"
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text">
                Other
                <input
                    id="csv-delimiter-other-text"
                    type="text"
                    ng-model="$ctrl.csvSeparatorOther"
                    ng-disabled="$ctrl.disabled"
                    ng-change="$ctrl.onCsvSeparatorOtherChanged()"
                    class="zem-report-query-config__csv-delimiter--other-text input-text"
                    size="1"
                    maxlength="1"
                />
            </span>
        </label>
    </div>
</div>
<div class="form__group">
    <label class="form__label"> CSV decimal separator </label>
    <div class="form__radio">
        <label>
            <input
                id="csv-decimal-separator-radio-dot"
                type="radio"
                ng-model="$ctrl.config.csvDecimalSeparator"
                value="."
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text">
                Dot (used in AU, US, UK and other english speaking countries)
            </span>
        </label>
    </div>
    <div class="form__radio">
        <label>
            <input
                id="csv-decimal-separator-radio-comma"
                type="radio"
                ng-model="$ctrl.config.csvDecimalSeparator"
                value=","
                ng-disabled="$ctrl.disabled"
                ng-change="$ctrl.update()"
                class="input-radio"
            />
            <span class="radio-text">
                Comma (Europe, South America and Russia)
            </span>
        </label>
    </div>
</div>
