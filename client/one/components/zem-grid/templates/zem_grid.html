<div>
    <div class="zem-grid-container loader-container">
        <div class="loader" ng-show="ctrl.grid.meta.loading"></div>
        <div class="zem-grid" ng-if="ctrl.grid.meta.initialized">
            <zem-grid-header grid="ctrl.grid"></zem-grid-header>
            <zem-grid-body grid="ctrl.grid"></zem-grid-body>
            <zem-grid-footer grid="ctrl.grid"></zem-grid-footer>
        </div>
    </div>

    <!-- FIXME: Move inline templates to files in templates directory -->
    <!-- Popover templates -->
    <script id="performanceIndicatorPopover.html" type="text/ng-template">
        <ul class="icon-list">
            <li ng-repeat="status in ctrl.statusList">
                <img class="zem-icon {{status.class}}" ng-src="{{ctrl.config.static_url}}/one/img/{{status.file}}" /> {{status.text}}
            </li>
        </ul>
    </script>
    <!-- Modal templates -->
    <script id="stateSelectorModal.html" type="text/ng-template">
        <div class='state-selector-modal zem-grid-modal'>
            <ul ng-if="ctrl.isEditable" class="state-list editable">
                <li zem-lazy-popover-text="{{ ctrl.active || ctrl.enablingAutopilotSourcesAllowed ? '' : 'To enable this Media Source please add more funds to Autopilot\'s total Daily Budget.' }}"
                    zem-lazy-popover-placement="right"
                    zem-lazy-popover-animation-class="fade"
                    zem-lazy-popover-append-to-body="true">
                    <span ng-if="!ctrl.active && !ctrl.enablingAutopilotSourcesAllowed" class="state-item">
                        <span class="state-icon active"></span><span class="state-text">Enabled</span>
                    </span>
                    <a ng-if="ctrl.active || ctrl.enablingAutopilotSourcesAllowed" class="state-item" ng-click="ctrl.setState(ctrl.stateValues.enabled)">
                        <span class="state-icon active"></span><span class="state-text">Enabled</span>
                    </a>
                </li>
                <li>
                    <a class="state-item" ng-click="ctrl.setState(ctrl.stateValues.paused)">
                        <span class="state-icon paused"></span><span class="state-text">Paused</span>
                    </a>
                </li>
            </ul>
            <ul ng-if="!ctrl.isEditable" class="state-list uneditable">
                <li ng-if="ctrl.active">
                    <span class="state-item">
                        <span class="state-icon active"></span>
                        <span class="state-text">Enabled</span>
                    </span>
                </li>
                <li ng-if="!ctrl.active">
                    <span class="state-item">
                        <span class="state-icon paused"></span>
                        <span class="state-text">Paused</span>
                    </span>
                </li>
                <li>
                    <span class="state-item disabled-message">
                        {{ctrl.disabledMessage}}
                    </span>
                </li>
            </ul>
        </div>
    </script>
    <script id="editableCurrencyFieldModal.html" type="text/ng-template">
        <div class='editable-currency-field-modal zem-grid-modal'>
            <div class="edit-form">
                <span class="currency-input">
                    <span class="prefix">$</span>
                    <input type="text" ng-model="ctrl.editFormInputValue" ng-trim="false" ng-change="ctrl.filterInput()" focus ng-keydown="$event.keyCode === 13 && ctrl.save()"><!-- key code 13 = Enter -->
                </span>
                <button class="save-button btn btn-primary" ng-click="ctrl.save()"><span ng-show="ctrl.showLoader" class="loader-image"></span><span ng-show="!ctrl.showLoader">Save</span></button>
                <button class="cancel-button btn btn-default" ng-click="ctrl.closeModal()">Cancel</button>
                <span class="error" ng-repeat="error in ctrl.errors">{{error}}</span>
            </div>
        </div>
    </script>
</div>
