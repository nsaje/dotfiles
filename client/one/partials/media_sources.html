<div class="page page-media-sources">
    <div class="section">
        <div class="graph-infobox-parent">
            <div class="graph-infobox-row">
                <div ng-if="hasPermission('zemauth.can_see_content_insights') && sideBarVisible" class='sidebar-container'>
                    <zem-internal-feature ng-if="isPermissionInternal('zemauth.can_view_sidetabs')" popover-placement="bottom"></zem-internal-feature>
                    <zem-side-tabset zem-selected="selectedSideTab.tab" zem-has-permission="hasPermission" zem-is-permission-internal="isPermissionInternal"/>
                </div>
                <div ng-if="!hasPermission('zemauth.can_see_content_insights')" class="insights-container" ng-show="isContentInsightsVisible">
                    <zem-content-insights-legacy summary="contentInsights.summary" metric="contentInsights.metric" best-performer-rows="contentInsights.bestPerformerRows" worst-performer-rows="contentInsights.worstPerformerRows"></zem-content-insights-legacy>
                </div>
                <div class="graph-container" ng-show="isChartVisible" ng-class="{'all-accounts-sources': $state.current.name.includes('main.allAccounts.sources'), 'account-sources': $state.current.name.includes('main.accounts.sources')}"
                     ng-style="hasPermission('zemauth.can_see_new_content_insights') ? {'padding-left': '15px'} : {}">
                    <zem-chart-legacy ng-if="!hasPermission('zemauth.can_see_new_chart')" zem-data="chartData" zem-metrics="_chartMetrics" zem-metric-options="chartMetricOptions" zem-min-date="dateRange.startDate" zem-max-date="dateRange.endDate" zem-on-remove="selectedSourceRemoved(id)" local-storage-prefix="localStoragePrefix" zem-is-loading="chartIsLoading"></zem-chart-legacy>
                    <zem-chart ng-if="hasPermission('zemauth.can_see_new_chart')"
                            level="config.level"
                            breakdown="config.breakdown"
                            entity-id="config.entityId"
                            grid-api="grid.api"
                    ></zem-chart>
                </div>
                <div class="spacing"></div>
                <div class="infobox-container">
                    <zem-infobox ng-if="hasPermission('zemauth.can_see_new_infobox')" class="zem-infobox"></zem-infobox>
                    <zem-legacy-infobox ng-if="!hasPermission('zemauth.can_see_new_infobox')" class="infobox-wrapper" header="infoboxHeader" basic-settings="infoboxBasicSettings" performance-settings="infoboxPerformanceSettings" link-to="infoboxLinkTo" state-id="$state.params.id"></zem-legacy-infobox>
                </div>
            </div>
        </div>
    </div>
    <div class="section zem-internal-feature-container white-background" ng-if="hasPermission('zemauth.can_access_table_breakdowns_feature')">
        <zem-internal-feature ng-if="isPermissionInternal('zemauth.can_access_table_breakdowns_feature')"></zem-internal-feature>

        <zem-alerts level="config.level" entity-id="config.entityId"></zem-alerts>

        <div class="button-bar" ng-if="grid.api">
            <zem-grid-export api="grid.api" class="pull-right"></zem-grid-export>
            <zem-grid-column-selector api="grid.api" class="pull-right"></zem-grid-column-selector>
            <zem-grid-breakdown-selector api="grid.api" class="pull-right"></zem-grid-breakdown-selector>
        </div>
        <zem-grid-integration
                api="grid.api"
                options="grid.options"

                level="config.level"
                breakdown="config.breakdown"
                entity-id="config.entityId"

                selection="selection"
                selection-callback="updateSelectedRowsData"
        >
        </zem-grid-integration>
    </div>
</div>
