<div class="page page-account-campaigns">
    <div class="section">
        <div class="graph-infobox-parent">
            <div ng-class="{'graph-collapsed': !graphVisible && !infoboxVisible && hasPermission('zemauth.can_see_infobox'), 'graph-hidden': !graphVisible && infoboxVisible && hasPermission('zemauth.can_see_infobox'), 'graph-container-short': graphVisible && infoboxVisible && hasPermission('zemauth.can_see_infobox'), 'graph-infobox-parent': graphVisible && !hasPermission('zemauth.can_see_inbofox')}">
                <zem-chart zem-data="chartData" zem-metric1="chartMetric1" zem-metric2="chartMetric2" zem-metric-options="chartMetricOptions" zem-min-date="dateRange.startDate" zem-max-date="dateRange.endDate" zem-on-remove="selectedSourceRemoved(id)" local-storage-prefix="localStoragePrefix"></zem-chart>
            </div>
            <div ng-if="hasPermission('zemauth.can_see_infobox')" ng-class="{'infobox-container-full': infoboxVisible, 'infobox-container-short': !infoboxVisible}">
                <zem-infobox header="infoboxHeader" settings="infoboxSettings" link-to="'main.accounts.settings'" state-id="$state.params.id"></zem-infobox>
            </div>
        </div>
    </div>
    <div class="section table-ad-group-ads">
        <div class="button-bar">
            <div ng-if="hasPermission('zemauth.account_campaigns_add_campaign')" class="button-bar-item add-source-container">
                <zem-internal-feature ng-if="isPermissionInternal('zemauth.account_campaigns_add_campaign')" popover-placement="bottom"></zem-internal-feature>
                <button type="button"
                        class="btn btn-add"
                        ng-click="addCampaign()"
                        zem-tutorial-popover-condition-promise="showAddCampaignTutorial()"
                        zem-tutorial-popover="Click here to create a campaign"
                        zem-tutorial-popover-placement="top">
                    + Campaign
                </button>
                <div class="loader" ng-show="addCampaignRequestInProgress"></div>
            </div>
            <div ng-if="!hasPermission('zemauth.exports_plus')" class="button-bar-item export-container">
                <zem-export
                    start-date="dateRange.startDate"
                    end-date="dateRange.endDate"
                    base-url="'api/accounts/' + $state.params.id + '/campaigns/'"
                    options="exportOptions">
                </zem-export>
            </div>

            <div ng-if="hasPermission('zemauth.exports_plus')" class="button-bar-item pull-right">
              <zem-internal-feature ng-if="isPermissionInternal('zemauth.exports_plus')" popover-placement="bottom"></zem-internal-feature>
                <zem-export-plus
                    start-date="dateRange.startDate"
                    end-date="dateRange.endDate"
                    base-url="'api/accounts/' + $state.params.id + '/'"
                    options="exportPlusOptions"
                    columns="columns"
                    order="order"
                    level="level"
                    export-sources="false">
                </zem-export-plus>
            </div>

            <zem-custom-table-cols class="pull-right" columns="columns" categories="columnCategories" local-storage-prefix="localStoragePrefix"></zem-custom-table-cols>
        </div>

        <alert type="info" class="alert-sync" ng-show="!isSyncRecent">
        We are experiencing a delay synchronizing reporting metrics. <span ng-if="!!lastSyncDate">The last successful sync took place {{ lastSyncDate.fromNow() }}.</span> If you have any questions please contact us at <a href="mailto:help@zemanta.com">help@zemanta.com</a>.
        </alert>

        <zem-table zem-table-columns="columns" zem-table-rows="rows" zem-table-total-row="totalRow" zem-table-show-loader="getTableDataRequestInProgress" zem-table-order="order" zem-table-order-callback="orderTableData(order)" zem-table-data-status="dataStatus"></zem-table>

        <div class="table-footnotes">
            <div ng-switch="lastSyncDate">
                <span ng-switch-when="null">
                    * Reporting metrics haven't been synced yet.
                </span>
                <span ng-switch-default>
                    * Reporting metrics synced {{Â lastSyncDate.fromNow() }}. The reporting data is an estimate, and the final amount will be reflected on your invoice.
                </span>
            </div>
            <div ng-show="isIncompletePostclickMetrics">
                * Postclick metrics are incomplete for the selected date range.
            </div>
            <div>* All times are in Eastern Standard Time (EST).</div>
        </div>
    </div>
</div>
