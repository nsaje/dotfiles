<div class="modal__header">
    <div class="modal__title">{{title}}</div>
</div>
<div class="modal__body">
    <div class="form" id="conversion-pixel-form">
        <div class="form__group" ng-class="{'form--error': !!validationErrors.name}">
            <label class="form__label" for="name-input">Name</label>
            <input class="input-text" type="text" zem-focus-select id="name-input" ng-model="pixel.name"
                   ng-change="clearError()" />
            <div class="message message--error" ng-repeat="error in validationErrors.name" for="name-input">{{ error }}</div>
        </div>

        <div class="form__group" ng-if="hasPermission('zemauth.can_redirect_pixels')" ng-class="{'form--error': !!validationErrors.redirect_url}">
            <label for="redirect-url-input" class="form__label" is-internal="zemauth.can_redirect_pixels">
                Redirect Url
            </label>
            <input type="text" id="redirect-url-input" class="input-text" ng-model="pixel.redirectUrl" ng-change="clearError()" />
            <div ng-repeat="error in validationErrors.redirect_url" class="message message--error" for="redirect-url-input">{{ error }}</div>
        </div>

        <div class="form__group" ng-class="{'form--error': !!error && !!errorMessage}"
             ng-if="hasPermission('zemauth.account_custom_audiences_view')">
            <label class="form__label" for="audience-enabled-input" is-internal="zemauth.account_custom_audiences_view">
                Build custom audiences from this pixel
            </label>
            <div class="form__checkbox">
                <label>
                    <input class="input-checkbox" type="checkbox" id="audience-enabled-input" ng-model="pixel.audienceEnabled"
                           ng-disabled="!!audiencePixel" ng-focus="clearError()" ng-change="clearError()" />
                    <label class="checkbox-text" for="audience-enabled-input"></label>
                </label>
            </div>
        </div>

        <div class="form__group" ng-class="{'form--error': !!validationErrors.notes}" ng-if="hasPermission('zemauth.can_see_pixel_notes')">
            <label class="form__label" for="notes-input" is-internal="zemauth.can_see_pixel_notes">Notes<zem-help-popover content="Add a note describing where the pixel is placed on your website and what it tracks." placement="top"></zem-help-popover></label>
            <textarea class="textarea" id="notes-input" type="text" ng-model="pixel.notes"></textarea>
            <div class="message message--error" ng-repeat="error in validationErrors.notes" for="notes-input">{{ error }}</div>
        </div>
    </div>

    <div ng-if="hasPermission('zemauth.account_custom_audiences_view')" class="m-b">
        <div class="message message--info message--with-icon" ng-if="!audiencePixel">
            Only one pixel can be used for building custom audiences. This choice is permanent. If you want to change this, please contact your Account Manager.
        </div>

        <div class="message message--info message--with-icon" ng-if="audiencePixel && audiencePixel.id != pixel.id">
            Only one pixel can be used for building custom audiences. You have already set pixel {{ audiencePixel.name }} for audience building, if you want to change this, please contact your Account Manager.
        </div>
    </div>

    <hr>

    <h3>Where do I place my pixel on my site?</h3>
    <p>Pixels need to be properly placed in order to measure goals effectively. We recommend placing your pixel on the confirmation page which is shown to a person after the desired action is performed.</p>
</div>
<div class="modal__footer buttons-panel">
    <button type="submit" class="button button--highlight button--with-icon check-icon" ng-click="submit()" ng-class="{'disabled': !!inProgress}">{{buttonText}}</button>
    <button type="button" class="button button--outline" ng-click="$dismiss()">Cancel</button>
    <div class="loader" ng-show="inProgress"></div>
    <span class="message message--error" ng-if="hasErrors">
        An error has occured. Please contact support at <a href="mailto:help@zemanta.com">help@zemanta.com</a> if the error persists.
    </span>
</div>
